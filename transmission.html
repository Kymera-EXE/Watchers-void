<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>+TRANSMISSION+</title>
  <style>
    /* reset + background */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
      font-family: monospace;
    }

    /* container central */
    #content {
      max-width: 700px;
      padding: 20px;
      color: #00008b;           /* azul escuro */
      white-space: pre-wrap;
      line-height: 1.6;
      animation: subtle-glitch 1s infinite alternate;
    }

    /* glitch geral */
    @keyframes subtle-glitch {
      0%   { text-shadow: 0 0 0.3px #ccc; transform: translate(0, 0); }
      50%  { text-shadow: 0.5px 0.5px 1px #9400d3; transform: translate(0.2px, -0.2px); }
      100% { text-shadow: 0 0 0.3px #ccc; transform: translate(0, 0); }
    }

    /* chars que aparecem*/
    .char {
      opacity: 0;
      animation: appear 0.5s forwards;
    }
    @keyframes appear { to { opacity: 1; } }

    /* cores especiais */
    .purple { color: #9400d3; }
    .red    { color: #cc0000; }

    /* o reveal parte usa mesmíssimo container */
    #revealSection { display: none; }
  </style>
</head>
<body>
  <div id="content">
    <div id="text-container"></div>
  </div>

  <audio id="bg-audio" autoplay loop>
    <source src="unconftransmission.mp3" type="audio/mpeg">
  </audio>

  <script>
  const introLines = [
    "///---=== TRANSMISSION RECEIVED ===---\\\\\\n",
    "ID: A-∴-VIGIA-77\\n",
    "Sinal: ♁ 14°52’N, 75°03’E",
    "Frequência de ruído: Estável",
    "Anomalia Observada: “SELETORES REM”",
    "Registros Comprometidos: Ricardo_00 / Isabela_Δ / Alex_Σ",
    "",
    "Status: [AGUARDANDO AUTORIZAÇÃO DE DESCIDA]",
    "Prosseguir? Y/N"
  ];

  const revealLines = [
    "[NOME INACESSÍVEL]\\n",
    "⚠ Este canal está sob proteção do Protocolo W-A-T",
    "⚠ Rastreamento de origens cognitivas em andamento...",
    "⍜ Você sempre me viu.",
    "⍜ Você não se lembra?",
    "+ Dream +"
  ];

  const container = document.getElementById("text-container");
  let phase = 'intro';
  let lines = introLines;
  let ln=0, ch=0;

  function typeWriter() {
    if (ln >= lines.length) {
      // fim desta fase: escuta Y/N
      document.addEventListener("keydown", onKey);
      return;
    }
    const line = lines[ln];
    if (ch < line.length) {
      const span = document.createElement("span");
      span.classList.add("char");
      span.textContent = line[ch] === '\\n' ? '' : line[ch];
      // se for Dream, adiciona link e classe purple
      if (phase==='reveal' && ln === lines.length-1) {
        const a = document.createElement("a");
        a.href = "dream.html";
        a.textContent = "+ Dream +";
        a.className = "purple";
        container.appendChild(a);
        ln++; ch=0;
        setTimeout(typeWriter, 400);
        return;
      }
      // cores especiais
      if (phase==='reveal') {
        if (ln===0) span.classList.add("red");      // nome inacessível
        else if (ln>=3&&ln<=4) span.classList.add("purple"); // frases finais
      }
      container.appendChild(span);
      ch++;
      setTimeout(typeWriter, 25);
    } else {
      container.appendChild(document.createElement("br"));
      ln++; ch=0;
      setTimeout(typeWriter, 150);
    }
  }

  function onKey(e) {
    if (e.key.toLowerCase()==='y' && phase==='intro') {
      // limpa e parte reveal
      document.removeEventListener("keydown", onKey);
      phase='reveal';
      lines = revealLines;
      ln=0; ch=0;
      // small gap
      container.appendChild(document.createElement("br"));
      container.appendChild(document.createElement("br"));
      typeWriter();
    }
    if (e.key.toLowerCase()==='n') {
      window.location.href = "index.html";
    }
  }

  window.onload = () => {
    typeWriter();
    // autoplay hack
    window.addEventListener('click',()=>{
      const a=document.getElementById('bg-audio');
      if(a.paused) a.play().catch(()=>{});
    });
  };
  </script>
</body>
</html>

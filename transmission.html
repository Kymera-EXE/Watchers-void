<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>+TRANSMISSION+</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #00008b;
      font-family: monospace;
      font-size: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    #content {
      max-width: 700px;
      padding: 20px;
      text-align: left;
      white-space: pre-wrap;
      line-height: 1.6;
      animation: subtle-glitch 1s infinite alternate;
    }

    @keyframes subtle-glitch {
      0%   { text-shadow: 0 0 0.3px #ccc; transform: translate(0, 0); }
      50%  { text-shadow: 0.5px 0.5px 1px #9400d3; transform: translate(0.2px, -0.2px); }
      100% { text-shadow: 0 0 0.3px #ccc; transform: translate(0, 0); }
    }

    .char {
      opacity: 0;
      animation: appear 0.5s forwards;
    }

    @keyframes appear {
      to {
        opacity: 1;
      }
    }

    .purple { color: #9400d3; }
    .red { color: #cc0000; }

    #revealSection {
      display: none;
      margin-top: 20px;
      animation: subtle-glitch 1s infinite alternate;
    }

    #revealSection p, #revealSection a {
      display: block;
      white-space: pre-wrap;
      line-height: 1.6;
      color: #00008b;
      font-family: monospace;
      font-size: 12px;
    }

    a.purple {
      text-decoration: none;
      margin-top: 10px;
    }

    audio {
      display: none;
    }
  </style>
</head>
<body>
  <div id="content">
    <div id="text-container"></div>

    <div id="revealSection">
      <p class="red">[NOME INACESSÍVEL]</p>
      <p>⚠ Este canal está sob proteção do Protocolo W-A-T</p>
      <p>⚠ Rastreamento de origens cognitivas em andamento...</p>
      <p class="purple">⍜ Você sempre me viu.<br>⍜ Você não se lembra?</p>
      <a href="dream.html" class="purple">+ Dream +</a>
    </div>
  </div>

  <audio id="bg-audio" autoplay loop>
    <source src="unconftransmission.mp3" type="audio/mpeg">
    Seu navegador não suporta áudio.
  </audio>

  <script>
    const lines = [
      "///---=== TRANSMISSION RECEIVED ===---\\\\\\n",
      "ID: A-∴-VIGIA-77\\n",
      "Sinal: ♁ 14°52’N, 75°03’E",
      "Frequência de ruído: Estável",
      "Anomalia Observada: “SELETORES REM”",
      "Registros Comprometidos: Ricardo_00 / Isabela_Δ / Alex_Σ",
      "",
      "Status: [AGUARDANDO AUTORIZAÇÃO DE DESCIDA]",
      "Prosseguir? Y/N"
    ];

    const container = document.getElementById("text-container");
    const reveal = document.getElementById("revealSection");
    let lineIndex = 0;
    let charIndex = 0;

    function typeWriter() {
      if (lineIndex >= lines.length) {
        document.addEventListener("keydown", handleKeyPress);
        return;
      }

      const currentLine = lines[lineIndex];
      if (charIndex < currentLine.length) {
        const span = document.createElement("span");
        span.classList.add("char");
        span.textContent = currentLine[charIndex] === '\\n' ? '\n' : currentLine[charIndex];
        container.appendChild(span);
        charIndex++;
        setTimeout(typeWriter, 20);
      } else {
        container.appendChild(document.createElement("br"));
        lineIndex++;
        charIndex = 0;
        setTimeout(typeWriter, 100);
      }
    }

    function handleKeyPress(e) {
      if (e.key.toLowerCase() === 'y') {
        revealWithTypingEffect();
      } else if (e.key.toLowerCase() === 'n') {
        window.location.href = "index.html";
      }
    }

    function revealWithTypingEffect() {
      const elements = Array.from(reveal.children);
      reveal.style.display = "block";

      let i = 0;
      function showNext() {
        if (i >= elements.length) return;
        elements[i].style.opacity = 0;
        elements[i].style.transition = "opacity 0.6s ease";
        setTimeout(() => {
          elements[i].style.opacity = 1;
          i++;
          showNext();
        }, 400);
      }

      showNext();
    }

    window.onload = typeWriter;

    // Autoplay workaround
    window.addEventListener('click', () => {
      const audio = document.getElementById('bg-audio');
      if (audio.paused) {
        audio.play().catch(() => {});
      }
    });
  </script>
</body>
</html>
